# CI/CD Workflow Diagram

## Complete Deployment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DEVELOPER WORKFLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Developer                    GitHub                    Jenkins
        â”‚                          â”‚                          â”‚
        â”‚  1. git push            â”‚                          â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
        â”‚                          â”‚                          â”‚
        â”‚                          â”‚  2. Webhook trigger      â”‚
        â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
        â”‚                          â”‚                          â”‚
        â”‚                          â”‚                          â”‚  3. Clone repo
        â”‚                          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                          â”‚                          â”‚
        â”‚                          â”‚                          â”‚  4. npm install
        â”‚                          â”‚                          â”‚  5. npm test
        â”‚                          â”‚                          â”‚  6. docker build
        â”‚                          â”‚                          â”‚
        â”‚                          â”‚                          â”‚
        â”‚                          â”‚                          â”‚  7. Push to ECR
        â”‚                          â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚          â”‚
        â”‚                          â”‚                          â”‚          â–¼
        â”‚                          â”‚                          â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚      â”‚  ECR   â”‚
        â”‚                          â”‚                          â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                          â”‚                          â”‚          â”‚
        â”‚                          â”‚                          â”‚          â”‚
        â”‚                          â”‚  8. Deploy to ECS        â”‚          â”‚
        â”‚                          â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                          â”‚                          â”‚          â”‚
        â”‚                          â”‚                          â”‚          â–¼
        â”‚                          â”‚                          â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚      â”‚  ECS   â”‚
        â”‚                          â”‚                          â”‚      â”‚ Fargateâ”‚
        â”‚                          â”‚                          â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                          â”‚                          â”‚          â”‚
        â”‚                          â”‚                          â”‚          â”‚
        â”‚                          â”‚                          â”‚          â–¼
        â”‚                          â”‚                          â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚      â”‚  ALB   â”‚
        â”‚                          â”‚                          â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                          â”‚                          â”‚          â”‚
        â”‚                          â”‚                          â”‚          â”‚
        â”‚  9. Access app          â”‚                          â”‚          â”‚
        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚  http://alb-url/        â”‚                          â”‚
        â”‚                          â”‚                          â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DEPLOYMENT STAGES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Stage 1: Checkout
    â”œâ”€ Clone GitHub repository
    â””â”€ Switch to main branch

Stage 2: Build
    â”œâ”€ npm install (install dependencies)
    â””â”€ npm test (run tests)

Stage 3: Docker Build
    â”œâ”€ docker build (create image)
    â””â”€ docker tag (tag with build number)

Stage 4: Push to ECR
    â”œâ”€ aws ecr get-login-password (authenticate)
    â”œâ”€ docker push :BUILD_NUMBER
    â””â”€ docker push :latest

Stage 5: Deploy to ECS
    â”œâ”€ aws ecs update-service (trigger deployment)
    â””â”€ ECS performs rolling update
        â”œâ”€ Start new tasks with new image
        â”œâ”€ Wait for health checks
        â”œâ”€ Drain old tasks
        â””â”€ Complete deployment

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ROLLING UPDATE PROCESS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Before Deployment:
    ALB
     â”‚
     â”œâ”€â”€> Task 1 (old version) âœ“
     â””â”€â”€> Task 2 (old version) âœ“

During Deployment:
    ALB
     â”‚
     â”œâ”€â”€> Task 1 (old version) âœ“  â”€â”
     â”œâ”€â”€> Task 2 (old version) âœ“   â”‚ Still serving traffic
     â”œâ”€â”€> Task 3 (new version) âŸ³   â”‚ Starting
     â””â”€â”€> Task 4 (new version) âŸ³  â”€â”˜ Starting

After Health Checks Pass:
    ALB
     â”‚
     â”œâ”€â”€> Task 1 (old version) âŠ—  â”€â” Draining
     â”œâ”€â”€> Task 2 (old version) âŠ—  â”€â”˜ Draining
     â”œâ”€â”€> Task 3 (new version) âœ“  â”€â” Serving traffic
     â””â”€â”€> Task 4 (new version) âœ“  â”€â”˜ Serving traffic

Final State:
    ALB
     â”‚
     â”œâ”€â”€> Task 3 (new version) âœ“
     â””â”€â”€> Task 4 (new version) âœ“

Zero Downtime! âœ“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TIME TO DEPLOY                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

git push                    â†’ 0:00
GitHub webhook triggers     â†’ 0:01
Jenkins starts build        â†’ 0:05
npm install & test          â†’ 0:30
Docker build                â†’ 1:00
Push to ECR                 â†’ 1:30
ECS starts new tasks        â†’ 2:00
Health checks pass          â†’ 3:00
Old tasks drained           â†’ 3:30
Deployment complete         â†’ 4:00

Total: ~4 minutes from push to live! ğŸš€
